### План тестирования — BeCreator

## 1. Общая информация

Этот документ определяет стратегию, окружение и цели тестирования для веб-приложения **"BeCreator"** — white-label платформы для создания онлайн-школ, основанной на стеке **Node.js (Express/NestJS)**, **PostgreSQL** и **Next.js (React)**.

Цель тестирования — проверить корректность работы всех эндпоинтов backend API, логику управления курсами и кастомизации сайта, интеграцию между фронтендом и бэкендом, аутентификацию и авторизацию по ролям (Администратор, Студент), а также правильное поведение интерактивных элементов в личном кабинете и панели администратора.

## 2. Цели тестирования

1.  Проверить функциональную корректность всех контроллеров Backend (`/api/auth/*`, `/api/admin/courses/*`, `/api/admin/settings/*`, `/api/student/progress/*`).
2.  Валидировать CRUD-логику для сущностей курса (модули, уроки) и настроек сайта.
3.  Убедиться в корректной реализации JWT-аутентификации и авторизации для данных, привязанных к ролям и пользователям.
4.  Проверить отображение и синхронизацию данных между Frontend-компонентами и Backend API.
5.  Оценить базовую безопасность системы (SQL-инъекции, XSS, несанкционированный доступ к чужим курсам или панели администратора).
6.  Проверить обработку ошибок и валидацию входных данных на бэкенде и фронтенде.
7.  Валидировать корректность работы личного кабинета студента (просмотр уроков, отслеживание прогресса).

## 3. Область тестирования

### Входит в область тестирования

-   Unit- и интеграционные тесты для всех ключевых эндпоинтов Backend API.
-   JWT-аутентификация и авторизация (доступ к данным в соответствии с ролями Админ/Студент).
-   CRUD-операции для курсов, модулей и уроков.
-   Логика кастомизации сайта (цвета, лого, баннеры).
-   Валидация данных на бэкенде и фронтенде.
-   Проверки безопасности (SQL-инъекции, XSS, попытки несанкционированного доступа).
-   Отображение данных на страницах Frontend:
    -   Лендинг (публичная страница).
    -   Страницы входа и регистрации.
    -   Личный кабинет студента (список уроков, плеер).
    -   Панель администратора (редактор курса, настройки).
-   Корректная работа с PostgreSQL (целостность данных, связи).

### Не входит в область тестирования

-   Нагрузочное тестирование с большим количеством одновременных пользователей.
-   Полноценное кросс-браузерное тестирование (фокус на Chrome/Firefox).
-   Нативные мобильные приложения (только веб-версия).
-   Тестирование производительности видеостриминга.

## 4. Стратегия тестирования

Тестирование будет выполняться с использованием **автоматизированных тестов для бэкенда** и **ручного функционального тестирования** для фронтенда.

### Фреймворки и инструменты

| Тип | Инструмент | Описание |
|---|---|---|
| Backend-тесты | Jest / Mocha | Автоматизированные тесты для Node.js API |
| HTTP-клиент | Supertest | API- и интеграционные тесты для Express/NestJS |
| Мокирование | Jest Mocks | Мокирование БД/JWT при необходимости |
| API-тестирование (ручное)| Postman / cURL | Ручная проверка эндпоинтов |
| Frontend-тестирование | Браузер + DevTools | Верификация логики и UI |
| VCS / CI | Git + GitHub | Контроль версий, возможная настройка CI |
| Покрытие кода | Jest Coverage | Отчёты о покрытии кода тестами (планируется) |

## 5. Тестовое окружение

| Компонент | Технология / Версия |
|---|---|
| ОС | Linux (Ubuntu) / macOS / Windows 11 |
| Backend | Node.js 20+, Express.js/NestJS |
| Frontend | Next.js 14+, React 18+ |
| БД | PostgreSQL 15+ |
| API | REST API с JWT |
| Порт Backend | 5000 |
| Порт Frontend | 3000 |
| Браузер | Chrome 120+, Firefox 121+ |

## 6. Типы тестов и покрытие

| Тип | Цель | Количество тестов |
|---|---|---|
| Unit-тесты | Изолированная бизнес-логика (сервисы, утилиты) | ~10 |
| API-интеграционные тесты | HTTP-маршруты и их взаимодействие с логикой | ~25 |
| Тесты аутентификации/авторизации | Вход, валидация токена, контроль доступа по ролям | ~8 |
| Тесты безопасности | SQL-инъекции, XSS, несанкционированный доступ | ~4 |
| Функциональные тесты Frontend | Ручное UI/UX-тестирование | ~10 |
| Проверки производительности (базовые) | Время ответа ключевых эндпоинтов | 2–3 |

**Общее планируемое количество тест-кейсов:** около 60.

## 7. Риски и их предотвращение

| Риск | Вероятность | Влияние | Меры по предотвращению |
|---|---|---|---|
| БД не инициализирована / миграции отсутствуют| Высокая | Высокое | Запускать миграции и сиды перед тестами |
| API недоступен | Средняя | Высокое | Убедиться, что бэкенд запущен на порту :5000 |
| Ошибки в CORS или JWT-конфигурации | Средняя | Высокое | Проверить настройки CORS/JWT в `.env` файле |
| Истечение срока действия JWT-токена | Низкая | Среднее | Обновлять токен в ходе длительных ручных тестов |
| Проблемы с кэшем браузера | Низкая | Низкое | Очищать кэш перед тестами фронтенда |
| Загрязнение тестовой БД | Низкая | Среднее | Использовать отдельную БД/схему для тестов |

Общий уровень риска: **Низкий–Средний**.

## 8. Критерии начала и окончания тестирования

### Критерии начала

-   Приложение Node.js запускается без ошибок.
-   Тестовая база данных PostgreSQL создана, миграции применены, тестовые данные загружены.
-   Все зависимости установлены (`npm install`).
-   Фронтенд и бэкенд запущены и доступны из браузера.

### Критерии окончания

-   Все критические баги исправлены.
-   ≥ 90% тест-кейсов успешно пройдены.
-   Все тесты с приоритетом CRITICAL и HIGH пройдены.
-   Документация и результаты тестирования обновлены.

## 9. Отчётность и артефакты

| Документ | Описание | Статус |
|---|---|---|
| TEST_PLAN_BECREATOR.md | Этот план тестирования | ✅ Создан |
| TEST_RESULTS_BECREATOR.md| Результаты ручного/автоматизированного тестирования| ⏳ Планируется |
| TEST_SUMMARY.md | Итоговый отчёт и выводы | ⏳ Планируется |

## 10. Тестовые данные

### Тестовые пользователи

| # | Роль | Email | Пароль | Примечания |
|---|---|---|---|---|
| 1 | Администратор | admin@creator.dev | Admin123! | Владелец курса |
| 2 | Студент | student1@creator.dev| Student123! | Обычный студент |
| 3 | Студент | student2@creator.dev| Student123! | Для проверки изоляции данных |

### Пример тестовых сценариев (ID)

1.  ✅ Успешный вход Администратора (T001)
2.  ✅ Успешный вход Студента (T002)
3.  ✅ Вход с неверным паролем (T003)
4.  ✅ Регистрация нового Студента (T004)
5.  ✅ Создание нового урока Администратором (T010)
6.  ✅ Редактирование настроек сайта Администратором (T011)
7.  ✅ Просмотр урока Студентом (T020)
8.  ✅ Попытка Студента получить доступ к панели администратора (SEC001) -> Ожидается ошибка 403
9.  ❌ Попытка XSS в названии курса (SEC002) -> Должно экранироваться

## 11. График тестирования

| Этап | Дата | Ответственный | Статус |
|---|---|---|---|
| Планирование тестирования | 29.11.2025 | QA (я) | ✅ Выполнено |
| Настройка окружения | 29.11.2025 | Dev (я) | ✅ Выполнено |
| Функциональное тестирование Backend | 30.11.2025 | QA (я) | ✅ Выполнено |
| Функциональное тестирование Frontend| 01.11.2025 | QA (я) | ✅ Выполнено |
| Тестирование безопасности | 02-03.12.2025 | QA (я) | ✅ Выполнено |
| Регрессионное тестирование | 04.12.2025 | QA (я) | ✅ Выполнено |
| Итоговый отчёт | 04.12.2025 | QA (я) | ✅ Выполнено |

## 12. Метрики успеха

| Метрика | Целевое значение | Цель |
|---|---|---|
| Пройденные тест-кейсы | ≥ 90% | ✅ |
| Критические баги | = 0 | ✅ |
| Тесты высокого приоритета | 100% пройдено | ✅ |
| Среднее время ответа API | < 400 мс | ✅ |
| Покрытие API тестами | ≥ 85% | ✅ |

---

**Дата создания:** 29.11.2025
**Версия:** 1.0
**Автор:** Егор Ключенков
**Статус:** ✅ Утверждён